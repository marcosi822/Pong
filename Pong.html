<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Pong</title>
  <style>
    body {
      margin: 0;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      font-family: "Courier New", monospace;
      color: white;
      flex-direction: column;
    }
    canvas {
      background: rgba(0, 0, 0, 0.7);
      border: 3px solid white;
      border-radius: 10px;
      box-shadow: 0 0 40px rgba(255, 255, 255, 0.3);
      display: block;
      margin-top: 10px;
    }
    #menu {
      text-align: center;
    }
    button {
      margin: 5px;
      padding: 12px 20px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      background-color: #3643f413;
      color: white;
      box-shadow: 0 4px 6px rgba(253, 247, 246, 0.226);
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #3643f43f;
    }
    #btnVoltar {
      display: none;
      margin-top: 10px;
      background-color: #3643f43f;
    }
    #btnVoltar:hover {
      background-color: #3643f41a;
    }
    h2 {
      margin: 10px 0;
      font-size: 28px;
      color: white;
    }
  </style>
</head>
<body>
  <div id="menu">
    <h2>Pong - Escolha o Modo</h2>
    <button id="btnBot">Contra Bot</button>
    <button id="btn2p">2 Jogadores</button>
  </div>

  <canvas id="jogo" width="1000" height="600" style="display:none;"></canvas>
  <button id="btnVoltar">Voltar</button>

  <script>
    const canvas = document.getElementById("jogo");
    const ctx = canvas.getContext("2d");
    const menu = document.getElementById("menu");
    const btnBot = document.getElementById("btnBot");
    const btn2p = document.getElementById("btn2p");
    const btnVoltar = document.getElementById("btnVoltar");

    const raqueteW = 15, raqueteH = 80;
    const bolaTam = 10;
    const golTam = 250;

    let r1, r2, bola, velocidade;
    let pontos1 = 0, pontos2 = 0;
    let jogando = false;
    let modo = "bot";
    let teclas = {};
    let hits = 0;

    document.addEventListener("keydown", e => teclas[e.key] = true);
    document.addEventListener("keyup", e => teclas[e.key] = false);

    btnBot.onclick = () => iniciar("bot");
    btn2p.onclick = () => iniciar("2p");
    btnVoltar.onclick = () => voltar();

    function iniciar(tipo) {
      modo = tipo;
      menu.style.display = "none";
      btnVoltar.style.display = "inline-block";
      canvas.style.display = "block";
      resetar();
      jogando = true;
      loop();
    }

    function voltar() {
      jogando = false;
      menu.style.display = "block";
      btnVoltar.style.display = "none";
      canvas.style.display = "none";
      pontos1 = 0;
      pontos2 = 0;
      hits = 0;
    }

    function resetar() {
      r1 = { x: 30, y: canvas.height / 2 - raqueteH / 2 };
      r2 = { x: canvas.width - 30 - raqueteW, y: canvas.height / 2 - raqueteH / 2 };
      bola = { x: canvas.width / 2, y: canvas.height / 2 };
      velocidade = {
        x: 4 * (Math.random() < 0.5 ? 1 : -1),
        y: 3 * (Math.random() < 0.5 ? 1 : -1)
      };
      hits = 0;
    }

    function loop() {
      if (!jogando) return;

      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Meio
      ctx.setLineDash([6, 10]);
      ctx.beginPath();
      ctx.moveTo(canvas.width / 2, 0);
      ctx.lineTo(canvas.width / 2, canvas.height);
      ctx.strokeStyle = "rgba(255,255,255,0.5)";
      ctx.stroke();
      ctx.setLineDash([]);

      // Gols
      ctx.fillStyle = "#FFD700";
      ctx.shadowColor = "#FFD700";
      ctx.shadowBlur = 20;
      ctx.fillRect(0, (canvas.height - golTam) / 2, 8, golTam);
      ctx.fillRect(canvas.width - 8, (canvas.height - golTam) / 2, 8, golTam);
      ctx.shadowBlur = 0;

      // Pontos
      ctx.font = "48px Courier New";
      ctx.fillStyle = "#fff";
      ctx.fillText(pontos1, canvas.width / 4, 60);
      ctx.fillText(pontos2, canvas.width * 3 / 4, 60);

      // Raquetes
      ctx.fillStyle = "#1E90FF";
      ctx.fillRect(r1.x, r1.y, raqueteW, raqueteH);
      ctx.fillStyle = "#FF4500";
      ctx.fillRect(r2.x, r2.y, raqueteW, raqueteH);

      // Bola
      ctx.beginPath();
      ctx.arc(bola.x, bola.y, bolaTam, 0, Math.PI * 2);
      ctx.fillStyle = "white";
      ctx.shadowColor = "white";
      ctx.shadowBlur = 15;
      ctx.fill();
      ctx.shadowBlur = 0;

      // Movimento da bola
      bola.x += velocidade.x;
      bola.y += velocidade.y;

      // Bordas
      if (bola.y - bolaTam < 0 || bola.y + bolaTam > canvas.height) velocidade.y *= -1;

      // Colis√£o
      colisao(r1);
      colisao(r2);

      // Gol
      if (bola.x - bolaTam < 0) {
        if (bola.y < (canvas.height - golTam) / 2 || bola.y > (canvas.height + golTam) / 2) {
          velocidade.x *= -1;
          bola.x = bolaTam;
        } else {
          pontos2++;
          resetar();
        }
      }
      if (bola.x + bolaTam > canvas.width) {
        if (bola.y < (canvas.height - golTam) / 2 || bola.y > (canvas.height + golTam) / 2) {
          velocidade.x *= -1;
          bola.x = canvas.width - bolaTam;
        } else {
          pontos1++;
          resetar();
        }
      }

      // Movimento jogador 1
      if (teclas["w"]) r1.y -= 6;
      if (teclas["s"]) r1.y += 6;
      r1.y = Math.max(0, Math.min(canvas.height - raqueteH, r1.y));

      // Movimento jogador 2 ou bot
      if (modo === "2p") {
        if (teclas["ArrowUp"]) r2.y -= 6;
        if (teclas["ArrowDown"]) r2.y += 6;
      } else {
        if (bola.y < r2.y + raqueteH / 2) r2.y -= 4;
        if (bola.y > r2.y + raqueteH / 2) r2.y += 4;
      }
      r2.y = Math.max(0, Math.min(canvas.height - raqueteH, r2.y));

      requestAnimationFrame(loop);
    }

    function colisao(raquete) {
      if (
        bola.x + bolaTam > raquete.x &&
        bola.x - bolaTam < raquete.x + raqueteW &&
        bola.y + bolaTam > raquete.y &&
        bola.y - bolaTam < raquete.y + raqueteH
      ) {
        velocidade.x *= -1;
        if (hits < 10) {
          velocidade.x *= 1.05;
          velocidade.y *= 1.05;
          hits++;
        }
        bola.x = raquete === r1
          ? raquete.x + raqueteW + bolaTam
          : raquete.x - bolaTam;
      }
    }
  </script>
</body>
</html>
